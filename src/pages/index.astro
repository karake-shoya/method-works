---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';

const allPosts = await getCollection('blog');
const latestPosts = allPosts
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 5);
---

<Layout
	title="Method Works | 教育を変える設計と思考"
	description="元教員としての現場理解とDX実務の学びをもとに、教育を構造から考えるブログ。"
	ogTitle="Method Works | 教育を変える設計と思考"
	ogDescription="元教員としての現場理解とDX実務の学びをもとに、教育を構造から考えるブログ。"
	ogType="website"
	ogUrl="https://method-works.jp"
	ogImage="/images/ogp-method-works.jpg"
>
	<section class="hero">
		<p class="label">Notes on Designing Education</p>
		<h1>Method Works</h1>
		<p class="copy">
			教育を「思い」ではなく、<br />
			「仕組み」から考え直す。
		</p>
		<p class="description">
			教員 から エンジニアへ。<br />
			教育現場の違和感を<br />
			仕組みという視点で整理していく。
		</p>
		<a class="button" href="/blog">思考の記録を見る</a>
	</section>

	<section class="section">
		<h2>About Method Works</h2>
		<p>
			Method Worksは、<br />
			教育現場で感じた課題や疑問を、<br />
			できるだけ具体的に整理していくブログです。<br />
			成功も失敗も、そのまま記録していきます。
		</p>
	</section>

	<section class="section">
		<h2>最新記事</h2>
		{
			latestPosts.length > 0 ? (
				<ul class="posts">
					{latestPosts.map((post) => (
						<li>
							<a href={`/blog/${post.slug}/`}>
								<span>{post.data.title}</span>
								<time datetime={post.data.pubDate.toISOString()}>
									{post.data.pubDate.toLocaleDateString('ja-JP')}
								</time>
							</a>
						</li>
					))}
				</ul>
			) : (
				<p class="empty">準備中の記事があります。公開までしばらくお待ちください。</p>
			)
		}
	</section>

	<section class="section journey">
		<h2>Design the Next Learning</h2>
		<p>
			教育を変えると言うのは簡単ですが、<br />
			実際は地道な改善の積み重ねだと思っています。<br />
			その試行錯誤の過程を、ここに残していきます。
		</p>
	</section>
</Layout>

<style>
	.hero {
		padding: 3rem 0;
		border-bottom: 1px solid #d8ddd5;
	}

	.label {
		font-size: 0.8rem;
		letter-spacing: 0.08em;
		text-transform: uppercase;
		color: #5b6459;
	}

	h1 {
		font-size: clamp(2rem, 5vw, 3.2rem);
		margin: 0.2rem 0 1rem;
		line-height: 1.2;
	}

	.copy {
		font-size: clamp(1rem, 2.3vw, 1.35rem);
		margin: 0;
		color: #222;
	}

	.description {
		margin: 1.5rem 0 0;
		max-width: 64ch;
		line-height: 1.9;
		color: #3a4038;
	}

	.button {
		display: inline-block;
		margin-top: 1.8rem;
		padding: 0.75rem 1.25rem;
		background: #1f2a1f;
		color: #f7f8f6;
		text-decoration: none;
		border-radius: 999px;
		font-size: 0.95rem;
	}

	.section {
		padding: 2.6rem 0;
		border-bottom: 1px solid #d8ddd5;
	}

	h2 {
		font-size: 1.25rem;
		margin-top: 0;
		margin-bottom: 1rem;
	}

	.section p {
		max-width: 68ch;
		line-height: 1.9;
		margin: 0;
		color: #333;
	}

	.posts {
		list-style: none;
		padding: 0;
		margin: 0;
		display: grid;
		gap: 0.75rem;
	}

	.posts a {
		display: flex;
		justify-content: space-between;
		gap: 1rem;
		align-items: baseline;
		padding: 0.85rem 0;
		color: #1f2a1f;
		text-decoration: none;
		border-bottom: 1px dashed #ccd1ca;
	}

	.posts time {
		font-size: 0.9rem;
		color: #596257;
		white-space: nowrap;
	}

	.empty {
		color: #5b6459;
	}

	.journey {
		border-bottom: none;
		padding-bottom: 0;
	}

	@media (max-width: 640px) {
		.posts a {
			flex-direction: column;
			align-items: flex-start;
		}
	}
</style>
